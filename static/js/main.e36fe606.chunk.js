(this.webpackJsonpmessageme=this.webpackJsonpmessageme||[]).push([[0],{221:function(e,t,n){},409:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(2),s=n(1),c=n.n(s),i=n(91),o=n.n(i),l=(n(221),n(25)),d=n(7),u=n(12),j=n(27),h=Object(u.b)(null,(function(e){return{logoutAction:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"LOGOUT_SUCCESS"})}))}))}}}))((function(e){return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{className:"right",children:Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"# ",onClick:e.logoutAction,children:"Logout"})})})})})),b=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{className:"right",children:Object(r.jsx)("li",{children:Object(r.jsx)(l.c,{to:"/register",children:"Register"})})})})},O=Object(u.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth,n=t.uid?Object(r.jsx)(h,{}):Object(r.jsx)(b,{});return Object(r.jsx)("div",{children:Object(r.jsx)("nav",{className:"nav-wrapper teal lighten-2 z-depth-0",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(l.b,{to:"/",className:"brand-logo",children:"MessageMe!"}),Object(j.isLoaded)(t)&&n]})})})})),p=n(32),m=n(33),f=n(35),g=n(34),x=n(26),v=n(214),N=n.n(v),S=function(e){var t=e.post;return Object(r.jsx)("div",{className:"card z-depth-1 grey lighten-4",children:Object(r.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(r.jsx)("span",{className:"card-title",children:t.postContent}),Object(r.jsxs)("p",{children:["Posted by ",Object(r.jsx)("i",{children:t.postedBy})]}),Object(r.jsx)("p",{children:Object(r.jsx)(N.a,{format:"HH:mm DD/MM/YYYY",children:t.postedAt.toDate()})})]})})},C=n(31),y=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={postContent:""},e.handleChange=function(t){e.setState(Object(C.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.addPostAction(e.state),e.setState({postContent:""})},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"container center",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(r.jsx)("textarea",{id:"postContent",className:"materialize-textarea",placeholder:"What's on your mind?",onChange:this.handleChange,value:this.state.postContent}),Object(r.jsx)("button",{className:"addPost btn pink lighten-2 z-depth-0",children:"Add post"})]})})}}]),n}(s.Component),E=Object(u.b)(null,(function(e){return{addPostAction:function(t){return e(function(e){return function(t,n,r){var s=(0,r.getFirestore)(),c=n().firebase.profile,i=n().firebase.auth.uid;s.collection("posts").add(Object(a.a)(Object(a.a)({},e),{},{postedBy:c.firstName+" "+c.lastName,postedById:i,postedAt:new Date})).then((function(){t({type:"ADD_POST",post:e})})).catch((function(e){t({type:"ADD_POST_ERROR",error:e})}))}}(t))}}}))(y),R=function(e){var t=e.posts;return Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)(E,{}),t&&t.map((function(e){return Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(S,{post:e},e.id)})}))]})},w=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.posts;return Object(j.isLoaded)(t)&&!t.uid?Object(r.jsx)(d.a,{to:"/login"}):Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"dashboard container",children:Object(r.jsx)(R,{posts:n})})})}}]),n}(s.Component),A=Object(x.d)(Object(u.b)((function(e){return{auth:e.firebase.auth,posts:e.firestore.ordered.posts}})),Object(j.firestoreConnect)([{collection:"posts",orderBy:["postedAt","desc"]}]))(w),F=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(C.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.registerAction(e.state)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(r.jsx)(d.a,{to:"/"}):Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(r.jsx)("h5",{className:"grey-text text-darken-3",children:"Register"}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(r.jsx)("input",{type:"text",id:"firstName",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(r.jsx)("input",{type:"text",id:"lastName",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("button",{className:"btn indigo z-depth-0",children:"Register"}),Object(r.jsx)("div",{className:"red-text center",children:n?Object(r.jsx)("p",{children:n}):null})]})]})})}}]),n}(s.Component),D=Object(u.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{registerAction:function(t){return e(function(e){return function(t,n,a){var r=a.getFirebase,s=r(),c=r().firestore();s.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return c.collection("users").doc(t.user.uid).set({email:e.email,firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],accountCreated:new Date})})).then((function(){t({type:"REGISTER_SUCCESS"})})).catch((function(e){t({type:"REGISTER_ERROR",error:e})}))}}(t))}}}))(F),_=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(C.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.loginAction(e.state)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(r.jsx)(d.a,{to:"/"}):Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(r.jsx)("h5",{className:"grey-text text-darken-3",children:"Login"}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(r.jsxs)("div",{className:"input-field",children:[Object(r.jsx)("button",{className:"btn indigo z-depth-0",children:"Login"}),Object(r.jsx)("div",{className:"red-text center",children:n?Object(r.jsx)("p",{children:n}):null})]})]})})}}]),n}(s.Component),I=Object(u.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{loginAction:function(t){return e(function(e){return function(t,n,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"LOGIN_SUCCESS"})})).catch((function(e){t({type:"LOGIN_ERROR",error:e})}))}}(t))}}}))(_);var P=function(){return Object(r.jsx)(l.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(O,{}),Object(r.jsx)(d.a,{to:"/"}),Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{exact:!0,path:"/",component:A}),Object(r.jsx)(d.b,{path:"/register",component:D}),Object(r.jsx)(d.b,{path:"/login",component:I})]})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,410)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},T=n(215),k=n(54),G={posts:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return console.log("ADD_POST",t.post),e;case"ADD_POST_ERROR":return console.log("ADD_POST_ERROR",t.error),e;default:return e}},z={authError:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_SUCCESS":return console.log("register success"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case"REGISTER_ERROR":return console.log("register error"),Object(a.a)(Object(a.a)({},e),{},{authError:t.error.message});case"LOGIN_SUCCESS":return console.log("login success"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case"LOGIN_ERROR":return console.log("login error"),Object(a.a)(Object(a.a)({},e),{},{authError:t.error.message});case"LOGOUT_SUCCESS":return console.log("logout success"),e;default:return e}},M=Object(x.c)({auth:B,post:U,firebase:j.firebaseReducer,firestore:k.firestoreReducer}),Y=(n(212),n(141));n(407);Y.a.initializeApp({apiKey:"AIzaSyAo_4-bdLFcoq31O0o-XorzDWHyythV3R0",authDomain:"messageme-f5a0b.firebaseapp.com",databaseURL:"https://messageme-f5a0b.firebaseio.com",projectId:"messageme-f5a0b",storageBucket:"messageme-f5a0b.appspot.com",messagingSenderId:"170724100537",appId:"1:170724100537:web:7c724a0b0763e864990e68",measurementId:"G-G6Y43LQQE1"});var W=Y.a,H=Object(x.e)(M,Object(x.d)(Object(x.a)(T.a.withExtraArgument({getFirebase:j.getFirebase,getFirestore:k.getFirestore})),Object(k.reduxFirestore)(W))),J={firebase:W,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:H.dispatch,createFirestoreInstance:k.createFirestoreInstance};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:H,children:Object(r.jsx)(j.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},J),{},{children:Object(r.jsx)(P,{})}))})}),document.getElementById("root")),L()}},[[409,1,2]]]);
//# sourceMappingURL=main.e36fe606.chunk.js.map